<div class = "scheduleDiv mat-elevation-z4">
    <div class = "datePickerDiv">
        <app-material-date-range-picker (pickedValue) = "calendarValueChanged($event)" [rangeMaxLengthInDays] = "31"></app-material-date-range-picker>
    </div>
    <div class="scheduleTableDiv mat-elevation-z4">

        <table mat-table [dataSource]="dataSource" class = "scheduleTable">

            <!--- Note that these columns can be defined in any order.
                        The actual rendered columns are set as a property on the row definition" -->

            <ng-container matColumnDef="specialization" sticky>
                <th mat-header-cell *matHeaderCellDef> Специализация </th>
                <td mat-cell *matCellDef="let row"> {{row.specializationName}} </td>
            </ng-container>

            <ng-container matColumnDef="name" sticky>
                <th mat-header-cell *matHeaderCellDef> Имя </th>
                <td mat-cell *matCellDef="let row"> {{row.doctorName}} </td>
            </ng-container>

            <ng-container *ngFor="let header of columnHeaderDates; let i = index;" matColumnDef = {{displayedColumns[i+2]}}>
                <!-- Reset counter before each row (person) is processed -->
                <div style="display: none;">{{ resetDailyInformationCounter() }}</div>

                <th mat-header-cell *matHeaderCellDef class = "dynamicAmountColumnHeader"> 
                    <div>{{columnHeaderDayOfWeekNames[i]}}</div> 
                    <div>{{header}}</div>
                </th>

                <td mat-cell *matCellDef="let row" class = "dynamicAmountColumnContents">

                    <ng-template *ngIf="dailyInformationCounter < row.dailyInformation.length; then accessAndCheck; else fillEmptyInterval"></ng-template>
                    <ng-template #accessAndCheck>
                        <ng-template #accessAndCheck *ngIf="header == row.dailyInformation[dailyInformationCounter].date; then fillCellWithData; else fillEmptyInterval"></ng-template>
                    </ng-template>
                    <ng-template #fillCellWithData>
                        <div>
                            <!-- DEBUG "{{header}}" "{{row.dailyInformation[dailyInformationCounter].date}}"-->
                            {{ row.dailyInformation[dailyInformationCounter].startOfDay.concat("-").concat(row.dailyInformation[dailyInformationCounter].endOfDay) }}
                        </div>
                        <!-- Increment counter that iterates over dailyInformation -->
                        <div style="display: none;">{{ incrementDailyInformationCounter() }}</div>
                    </ng-template>

                    <ng-template #fillEmptyInterval>Выходной <!-- DEBUG "{{dailyInformationCounter}}" "{{row.dailyInformation.length}}" "{{dailyInformationCounter&lt;row.dailyInformation.length}}"--></ng-template>

                    <!-- DEBUG <ng-template #debug>{{header}} {{row.dailyInformation[dailyInformationCounter].date}} {{header == row.dailyInformation[dailyInformationCounter].date}}</ng-template>-->

                </td> 

            </ng-container>
        
            <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
    </div>
</div>