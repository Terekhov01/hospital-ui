<h1>{{title}}</h1>
<div>
  <ngx-skeleton-loader *ngIf="!contentLoaded" count="4"></ngx-skeleton-loader>

  <div *ngIf="contentLoaded">
    <mat-list>
      <mat-list-item>Пациент: {{medCard.patient.user.lastName}} {{medCard.patient.user.firstName}}</mat-list-item>
      <mat-divider></mat-divider>
      <mat-list-item>
        Противопоказания: {{medCard.contraindications}}
        <!--    <button (click)="getContr()" mat-icon-button color="warn">Просмотреть</button>-->
        <button (click)="editContr()" mat-icon-button color="primary"><mat-icon>border_color</mat-icon></button>
      </mat-list-item>
      <mat-divider></mat-divider>
      <mat-list-item>
        Наследственные заболевания: {{medCard.hereditary}}
        <!--    <button (click)="getHereditary()" mat-icon-button color="warn">Просмотреть</button>-->
        <button (click)="editHereditary()" mat-icon-button color="primary"><mat-icon>border_color</mat-icon></button>
      </mat-list-item>
    </mat-list>

    <mat-card>
      <mat-card-title>Мои приемы в клинике</mat-card-title>
      <br>
      <select required  [(ngModel)]="selectedService" (ngModelChange)="onServiceChange()">
        <option value="">Выберите услугу</option>
        <option *ngFor="let service of services">{{service.serviceName}}</option>
      </select>
      <form (ngSubmit)="roomSearch()">
        <div class="form-group">
          <input class="mt-2 p-0" placeholder="Номер кабинета" type="text" [(ngModel)]="room" name="room"/>
        </div>
        <button class="mr-1 btn-primary" type="submit" mat-stroked-button>Найти</button>
        <button class="ml-1 btn-primary" (click)="ngOnInit()" type="submit" mat-stroked-button>Сбросить фильтры</button>
      </form>
      <mat-card *ngFor="let appointment of pagedItems">
        <mat-card>
          <mat-card-title>{{appointment.appointmentRegistration.service}}</mat-card-title>
          <mat-card-content>Доктор: {{appointment.appointmentRegistration.doctor.user.lastName}}</mat-card-content>
          <mat-card-content>Описание: {{appointment.description}}</mat-card-content>
          <mat-card-content>Заключение: {{appointment.docStatement}}</mat-card-content>
          <mat-card-actions>
            <button (click)="appointmentOne(appointment.id)" mat-stroked-button class="btn-primary">Просмотреть прием</button>
          </mat-card-actions>
        </mat-card>
        <br>
      </mat-card>
      <a *ngIf="allItemsEmpty">Поиск не дал результатов</a>
      <ul *ngIf="pager.pages && pager.pages.length" class="pagination">
        <li [ngClass]="{disabled:pager.currentPage === 1}">
          <button (click)="setPage(1)" mat-icon-button color="primary">Первая</button>
        </li>
        <li [ngClass]="{disabled:pager.currentPage === 1}">
          <button (click)="setPage(pager.currentPage - 1)" mat-icon-button color="primary">Пред</button>
        </li>
        <li *ngFor="let page of pager.pages" [ngClass]="{active:pager.currentPage === page}">
          <button (click)="setPage(page)" mat-icon-button color="primary">{{page}}</button>
        </li>
        <li [ngClass]="{disabled:pager.currentPage === pager.totalPages}">
          <button (click)="setPage(pager.currentPage + 1)" mat-icon-button color="primary">След</button>
        </li>
        <li [ngClass]="{disabled:pager.currentPage === pager.totalPages}">
          <button (click)="setPage(pager.totalPages)" mat-icon-button color="primary">Последняя</button>
        </li>
      </ul>
    </mat-card>
  </div>
</div>

