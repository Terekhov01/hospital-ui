<div class="scheduleTableDiv mat-elevation-z4">
  <form [formGroup] = "tableData.getTableDataSubject().value">
    <ng-container formArrayName = "rows">
      <mat-table [dataSource] = "tableData">

        <!--<div *ngIf = "debugger(tableData)"></div>-->
        <!--- Note that these columns can be defined in any order.
            The actual rendered columns are set as a property on the row definition" -->

        <ng-container *ngFor="let columnId of tableData.getDisplayedColumns().value; let i = index;" matColumnDef = {{columnId}}>
          <th mat-header-cell *matHeaderCellDef class = "dynamicAmountColumnHeader">
            <div>День {{columnId}}</div>
          </th>

          <div>
            <td mat-cell *matCellDef = "let element; let j = index;" [formGroupName] = "j" class = "dynamicAmountColumnContents">
              <div formArrayName = "cells">
                <div [formGroupName] = "i">
                  <div class="startTimePicker">
                    <input placeholder="" aria-label = "" [format] = "24" [ngxTimepicker] = "startTime" formControlName = "startTimePicker" readonly>
                    <ngx-material-timepicker #startTime [enableKeyboardInput]="true" [minutesGap] = "30" [theme] = "primaryTheme"></ngx-material-timepicker>
                  </div>

                  <div class="endTimePicker">
                    <input placeholder="" aria-label = "" [format] = "24" [ngxTimepicker] = "endTime" formControlName = "endTimePicker" readonly>
                    <ngx-material-timepicker #endTime [enableKeyboardInput]="true" [minutesGap] = "30" [theme] = "primaryTheme"></ngx-material-timepicker>
                  </div>
                </div>
              </div>
            </td>
          </div>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="tableData.getDisplayedColumns().value; sticky: true"></tr>
        <tr mat-row *matRowDef="let row; columns: tableData.getDisplayedColumns().value;"></tr>
      </mat-table>
    </ng-container>
  </form>
</div>

<button (click) = "tableData.addColumn()">Add column</button>
<button (click) = "tableData.addRow()">Add row</button>
<button (click) = "tableData.removeColumn()">Remove column</button>
<button (click) = "tableData.removeRow()">Remove row</button>
<button mat-stroked-button color="primary" (click) = "onSubmitClicked()">Submit</button>
